# Отчет о проделанной работе над библиотекой s21_decimal

## Введение

Тип `s21_decimal` предназначен для представления десятичных чисел в диапазоне от положительных 79,228,162,514,264,337,593,543,950,335 до отрицательных 79,228,162,514,264,337,593,543,950,335. Значение `s21_decimal` по умолчанию равно 0. Этот тип подходит для финансовых расчетов, требующих большого количества значимых целых и дробных цифр, минимизируя ошибки округления.

`Данный проект был групповым проектом. Владелец репозитория выполнил: Преобразование из двоичного числа в форму bcd, операторы сравнения, сложение, вычитание, умножение и тесты ко всему перечисленному.`

## Цели проекта

Целью проекта было реализовать библиотеку `s21_decimal` на языке С стандарта C11, которая должна включать:
- Арифметические операторы
- Операторы сравнения
- Преобразователи типов
- Другие полезные функции
- Покрытие кода unit-тестами

## Двоичное представление

Двоичное представление `s21_decimal` состоит из:
- 1-разрядного знака
- 96-разрядного целого числа
- Коэффициента масштабирования, указывающего положение десятичной точки

Операции с `Decimal` реализованы с помощью метода BCD (Binary-coded decimal), где используется восьмиэлементный массив 32-разрядных целых чисел со знаком (`int bits[8];`), где:
- `bits[0]` - `bits[6]` - мантиса.
- `bits[7]` содержит небольшую часть мантисы, коэффициент масштабирования и знак.

## Реализованные функции

### Арифметические операторы

| Название оператора | Оператор  | Функция                                                                            | 
| ------ | ------ |------------------------------------------------------------------------------------|
| Сложение | + | `int s21_add(s21_decimal value_1, s21_decimal value_2, s21_decimal *result)`         |
| Вычитание | - | `int s21_sub(s21_decimal value_1, s21_decimal value_2, s21_decimal *result)`         |
| Умножение | * | `int s21_mul(s21_decimal value_1, s21_decimal value_2, s21_decimal *result)` | 
| Деление | / | `int s21_div(s21_decimal value_1, s21_decimal value_2, s21_decimal *result)` |

Функции возвращают код ошибки:  
- 0 - OK  
- 1 - число слишком велико или равно бесконечности
- 2 - число слишком мало или равно отрицательной бесконечности
- 3 - деление на 0

### Операторы сравнения

| Название оператора | Оператор  | Функция | 
| ------ | ------ | ------ |
| Меньше  | < | `int s21_is_less(s21_decimal, s21_decimal)` |
| Меньше или равно | <= | `int s21_is_less_or_equal(s21_decimal, s21_decimal)` | 
| Больше | \> | `int s21_is_greater(s21_decimal, s21_decimal)` |
| Больше или равно | \>= | `int s21_is_greater_or_equal(s21_decimal, s21_decimal)` | 
| Равно | == | `int s21_is_equal(s21_decimal, s21_decimal)` |
| Не равно | != | `int s21_is_not_equal(s21_decimal, s21_decimal)` |

Возвращаемое значение:
- 0 - FALSE
- 1 - TRUE

### Преобразователи

| Преобразователь | Функция | 
| ------ | ------ |
| Из int | `int s21_from_int_to_decimal(int src, s21_decimal *dst)` |
| Из float  | `int s21_from_float_to_decimal(float src, s21_decimal *dst)` |
| В int  | `int s21_from_decimal_to_int(s21_decimal src, int *dst)` |
| В float  | `int s21_from_decimal_to_float(s21_decimal src, float *dst)` |

Возвращаемое значение - код ошибки:
 - 0 - OK
 - 1 - ошибка конвертации

### Другие функции

| Описание | Функция                                                  | 
| ------ |----------------------------------------------------------|
| Округляет указанное Decimal число до ближайшего целого числа в сторону отрицательной бесконечности. | `int s21_floor(s21_decimal value, s21_decimal *result)`    |	
| Округляет Decimal до ближайшего целого числа. | `int s21_round(s21_decimal value, s21_decimal *result)`    |
| Возвращает целые цифры указанного Decimal числа; любые дробные цифры отбрасываются, включая конечные нули. | `int s21_truncate(s21_decimal value, s21_decimal *result)` |
| Возвращает результат умножения указанного Decimal на -1. | `int s21_negate(s21_decimal value, s21_decimal *result)`   |

## Общая информация 

- Библиотека разработана на языке С стандарта C11 с использованием компилятора gcc.
- Код библиотеки расположен в папке `src`
- Библиотека оформлена как статическая библиотека с названием `s21_decimal.a` (с заголовочным файлом `s21_decimal.h`).
- Библиотека разработана в соответствии с принципами структурного программирования.
- Перед каждой функцией используется префикс `s21_`.

### Тестирование и сборка

- Полное покрытие unit-тестами функций библиотеки с помощью библиотеки Check.
- Unit-тесты покрывают не менее 80% каждой функции.
- Makefile для сборки библиотеки и тестов (цели: `all`, `clean`, `test`, `s21_decimal.a`, `gcov_report`).
- В цели `gcov_report` формируется отчет gcov в виде HTML страницы. Для этого unit-тесты запускаются с флагами gcov.


## Заключение

В рамках проекта была реализована библиотека `s21_decimal`, включающая основные арифметические операторы, операторы сравнения, преобразователи типов и дополнительные функции. Все функции покрыты unit-тестами, обеспечивающими не менее 80% покрытия. Библиотека соответствует стандартам POSIX.1-2017 и Google Style, Makefile для удобной сборки и тестирования.